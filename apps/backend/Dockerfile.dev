# Development Dockerfile for Boom Backend
FROM node:20-alpine

# Set working directory
WORKDIR /app

# Install dependencies for development
# Only copy package files first for better layer caching
COPY package*.json ./
RUN npm ci

# Copy configuration files needed for Nx
COPY nx.json tsconfig.base.json ./

# Note: Source code will be mounted via volumes in docker-compose
# This allows for hot reload without rebuilding the image

# Expose the default port
EXPOSE 3000

# Start in development mode with hot reload
CMD ["npx", "nx", "serve", "backend", "--configuration=development"]
